{% extends "base.html" %}

{% block content %}
<div class="container">
  <h1>文献推荐</h1>
</div>
<div class="page-summary">
  <p>{% autoescape off %}{{ summary_messages }}{% endautoescape %}当前共推荐 {{ item_list | length }} 篇文献.</p>
</div>
{% if item_list %}
{% for item in item_list %}
<br>
<div class="card px-2 mx-2 d-flex flex-row">
  <div class="p-2 flex-fill text-start">{{ forloop.counter }}.</div>
  <div class="p-2 flex-fill">
    <div class="text-start">
      {{ item.paper.journal }},
      {{ item.paper.pub_year }}.
      {% if item.paper.doi %}doi: <a href="https://doi.org/{{ item.paper.doi }}" target="_blank">{{ item.paper.doi }}</a>{% endif %}
      {% if item.paper.pmid %}PMID: <a href="https://pubmed.ncbi.nlm.nih.gov/{{ item.paper.pmid }}" target="_blank">{{ item.paper.pmid }}</a>{% endif %}
    </div>
    <div class="mt-2">
      {% for t in item.trackings.all %}
      <span class="badge" style="background-color:{{t.label.color}}">{{ t.label.name }}</span>
      {% endfor %}
    </div>
    <div class="fs-5 my-3"><b>{{ item.paper.title }}</b></div>
    
    <p>{{ item.author_list | join:", " }}</p>
    {% if item.paper.abstract %}
    <p><b>Abstract:</b> {{ item.paper.abstract }}</p>
    {% endif %}
    {% if item.paper.keywords %}
    <p><b>Keywords:</b> {{ item.paper.keywords }}</p>
    {% endif %}
    <div class="d-flex my-2">
      <div class="text-start align-self-end">推送时间：{{ item.create_time | date:"Y-m-d H:i" }}</div>
      <div class="flex-fill text-end align-self-end">
        <a class="btn btn-primary" href="#">加入个人文献库</a>
        <a class="btn btn-danger" href="#">删除</a>
      </div>
    </div>
  </div>
</div>
{% endfor %}
{% else %}
<p style="padding:20px; height:200px;">No recommendation item is available.</p>
{% endif %}
{% endblock content %}
