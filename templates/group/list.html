{% extends "group/base.html" %}
{% load view_extras %}
{% load static %}

{% block content %}
<div class="page-summary">
  <p>
    {% autoescape off %}{{ summary_messages }}{% endautoescape %}
    当前共有 {{ reviews.paginator.count }} 篇文献{% if reviews.paginator.num_pages > 1 %}，本页显示第 {{ reviews.start_index }} - {{ reviews.end_index }} 篇{% endif %}。
  </p>
</div>
{% if reviews %}

{% if collection %}
<h2>{{ collection.name }}</h2>
<p>创建时间：{{ collection.create_time|date:'Y-m-d H:i:s' }}</p>
<p>更新时间：{{ collection.update_time|date:'Y-m-d H:i:s' }}</p>
<p>{{ collection.desc }}</p>
{% endif %}

{% include "group/paginator.html" %}

{% for review, index in items %}
{% load view_extras %}
{% load static %}
<div class="border border-1 rounded px-3 pt-3 mb-3 bg-light-hover">
  <div class="d-flex">
    <div class="flex-fill">{{ index }}.</div>
    <div class="flex-grow-1 px-2">
      <div class="pb-2"><a class="fs-6 text-primary" href="{% url "group:review" id=review.pk group_name=group.name %}" id="review-title-{{review.pk}}">{{review.paper.title}}</a></div>
      <div>
        <span id="review-pub-year-{{review.pk}}">{{review.paper.pub_year}}</span>,
        <span id="review-journal-{{review.pk}}" class="fst-italic">{{ review.paper.journal }}</span>.
        {% include "group/review-info-id-list.html" %}
      </div>
      <div class="py-2">{% include "group/review-info-badge.html" %}</div>

      <div class="border border-1 mt-3 p-1">
        <div class="float-end fst-italic" id="review-create-time-{{review.pk}}">{{ review.create_time|date:'Y-m-d H:i:s' }}</div>
        <div class="mb-3">
          <a class="link-dark fw-bold" href="{% url "group:user" id=review.creator.pk group_name=group.name %}" id="review-user-{{review.pk}}">{{ review.creator }}</a>:
        </div>
        <div id="review-comment-{{review.pk}}" style="overflow-wrap:anywhere">{{ review.comments }}</div>
      </div>
    </div>
  </div>
  <div class="text-end my-3">
    {% include "group/review-info-operators.html" %}
  </div>
</div>
{% endfor %}

{% include "group/paginator.html" %}

{% else %}
<p style="padding:20px; height:200px;">暂无任何内容。</p>
{% endif %}

{% include "group/review-op-script.html" %}
{% endblock content %}
